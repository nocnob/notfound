{"componentChunkName":"component---src-pages-posts-asciidoc-page-attributes-slug-tsx","path":"/posts/java-cli-and-config-path/","result":{"data":{"asciidoc":{"id":"7107c8c7-43df-59e4-bd31-5d4f774be142","html":"<div class=\"sect1\">\n<h2 id=\"_java_cli_以及配置文件路径处理\"><a class=\"anchor\" href=\"#_java_cli_以及配置文件路径处理\"></a>Java cli 以及配置文件路径处理</h2>\n<div class=\"sectionbody\">\n<div class=\"ulist\">\n<ul>\n<li>\n<p>OpenJDK 11</p>\n</li>\n<li>\n<p>Gradle 6.8</p>\n</li>\n<li>\n<p>Apache Commons CLI</p>\n</li>\n</ul>\n</div>\n<div class=\"sect2\">\n<h3 id=\"_命令参数处理\"><a class=\"anchor\" href=\"#_命令参数处理\"></a>命令参数处理</h3>\n<div class=\"sect3\">\n<h4 id=\"_依赖\"><a class=\"anchor\" href=\"#_依赖\"></a>依赖</h4>\n<div class=\"paragraph\">\n<p>修改 <code>build.gradle</code> ：</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-groovy\" data-lang=\"groovy\">implementation group: 'commons-cli', name: 'commons-cli', version: '1.4'</code></pre>\n</div>\n</div>\n</div>\n<div class=\"sect3\">\n<h4 id=\"_源码\"><a class=\"anchor\" href=\"#_源码\"></a>源码</h4>\n<div class=\"paragraph\">\n<p>大致执行步骤：</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-java\" data-lang=\"java\">CommandLineParser parser = new DefaultParser();\n\nOptions options = new Options();\noptions.addOption(\"a\", \"all\", false, \"do not hide entries starting with .\");\noptions.addOption(\"A\", \"almost-all\", false, \"do not list implied . and ..\");\noptions.addOption(Option.builder()\n                  .longOpt(\"block-size\")\n                  .desc(\"use SIZE-byte blocks\")\n                  .hasArg()\n                  .argName(\"SIZE\")\n                  .build());\n\nif (args.length == 0) {\n    HelpFormatter formatter = new HelpFormatter();\n    formatter.printHelp(\"ls\", options);\n    return;\n}\n\ntry {\n    CommandLine line = parser.parse(options, args);\n    if(line.hasOption( \"block-size\" )) {\n        System.out.println(\"block-size: \" + line.getOptionValue(\"block-size\"));\n    }\n    if (line.hasOption(\"a\")) System.out.println(\"a\");\n    if (line.hasOption(\"A\")) System.out.println(\"A\");\n} catch (ParseException e) {\n    System.out.println( \"Unexpected exception:\" + e.getMessage() );\n}</code></pre>\n</div>\n</div>\n<div class=\"ulist\">\n<ul>\n<li>\n<p><code>HelpFormatter</code> 格式化输出参数帮助信息</p>\n</li>\n</ul>\n</div>\n</div>\n</div>\n<div class=\"sect2\">\n<h3 id=\"_自定义配置文件路径处理\"><a class=\"anchor\" href=\"#_自定义配置文件路径处理\"></a>自定义配置文件路径处理</h3>\n<div class=\"paragraph\">\n<p>通过 <code>user.dir</code> 获取当前的执行目录，结合 cli 可以获取配置文件绝对路径：</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-java\" data-lang=\"java\">System.getProperty(\"user.dir\")</code></pre>\n</div>\n</div>\n</div>\n<div class=\"sect2\">\n<h3 id=\"_参考\"><a class=\"anchor\" href=\"#_参考\"></a>参考</h3>\n<div class=\"ulist\">\n<ul>\n<li>\n<p><a href=\"http://commons.apache.org/proper/commons-cli/usage.html\">Cli Usage Scenarios</a></p>\n</li>\n</ul>\n</div>\n</div>\n</div>\n</div>","document":{"title":"Java cli 以及配置文件路径处理"},"pageAttributes":{"slug":"java-cli-and-config-path","category":"java"},"revision":{"date":"2021-03-14","number":"1.0"}}},"pageContext":{"id":"7107c8c7-43df-59e4-bd31-5d4f774be142","pageAttributes__slug":"java-cli-and-config-path","__params":{"pageAttributes__slug":"java-cli-and-config-path"}}},"staticQueryHashes":["3143286284"],"slicesMap":{}}