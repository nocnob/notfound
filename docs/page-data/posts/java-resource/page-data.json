{"componentChunkName":"component---src-pages-posts-asciidoc-page-attributes-slug-tsx","path":"/posts/java-resource/","result":{"data":{"asciidoc":{"id":"aa00657c-2e1e-5ed9-91d6-5deba880ac91","html":"<div id=\"preamble\">\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>读取 Java Resource 中的文件</p>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_源码\"><a class=\"anchor\" href=\"#_源码\"></a>源码</h2>\n<div class=\"sectionbody\">\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-java\" data-lang=\"java\">package com.example;\n\nimport java.io.IOException;\n\npublic class App {\n  public static void main( String[] args ) throws IOException {\n    from();\n    fromClassLoader();\n\n    App app = new App();\n    app.fromInstance();\n    app.fromInstanceClassLoader();\n  }\n\n  public static void from() throws IOException {\n    System.out.println(App.class.getResource(\"/data.txt\").toString());\n    // App.class.getResourceAsStream(\"/data.txt\");\n  }\n\n  public static void fromClassLoader() throws IOException {\n    System.out.println(App.class.getClassLoader().getResource(\"data.txt\").toString());\n    // App.class.getClassLoader().getResourceAsStream(\"data.txt\");\n  }\n\n  public void fromInstance() {\n    System.out.println(getClass().getResource(\"/data.txt\"));\n    // getClass().getResourceAsStream(\"/data.txt\");\n  }\n\n  public void fromInstanceClassLoader() {\n    System.out.println(getClass().getClassLoader().getResource(\"data.txt\"));\n    // getClass().getClassLoader().getResourceAsStream(\"data.txt\");\n  }\n}</code></pre>\n</div>\n</div>\n<div class=\"paragraph\">\n<p>未打包时，路径为普通文件路径，可以直接读取：</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-shell\" data-lang=\"shell\">cd target/classes\njava com.example.App\nfile:/home/notfound/test/demo/target/classes/data.txt\nfile:/home/notfound/test/demo/target/classes/data.txt\nfile:/home/notfound/test/demo/target/classes/data.txt\nfile:/home/notfound/test/demo/target/classes/data.txt</code></pre>\n</div>\n</div>\n<div class=\"paragraph\">\n<p>打包成 jar 后，路径为 jar URL，无法直接通过路径读取文件：</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-shell\" data-lang=\"shell\">java -jar target/demo-1.0-SNAPSHOT.jar\njar:file:/home/notfound/test/demo/target/demo-1.0-SNAPSHOT.jar!/data.txt\njar:file:/home/notfound/test/demo/target/demo-1.0-SNAPSHOT.jar!/data.txt\njar:file:/home/notfound/test/demo/target/demo-1.0-SNAPSHOT.jar!/data.txt\njar:file:/home/notfound/test/demo/target/demo-1.0-SNAPSHOT.jar!/data.txt</code></pre>\n</div>\n</div>\n<div class=\"paragraph\">\n<p>－可以通过 <code>getResourceAsStream</code> 来获取 <code>InputStream</code>\n对象，对文件内容进行读取。</p>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_q\"><a class=\"anchor\" href=\"#_q\"></a>Q</h2>\n<div class=\"sectionbody\">\n<div class=\"sect2\">\n<h3 id=\"_在_jar_中如何通过_randomaccessfile_读取文件内容\"><a class=\"anchor\" href=\"#_在_jar_中如何通过_randomaccessfile_读取文件内容\"></a>在 jar 中，如何通过 <code>RandomAccessFile</code> 读取文件内容？</h3>\n<div class=\"paragraph\">\n<p>jar 中的内容已经被压缩处理，无法随机读取。可以将内容写入到临时文件中，然后通过 <code>RandomAccessFile</code> 读取临时文件。</p>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_参考\"><a class=\"anchor\" href=\"#_参考\"></a>参考</h2>\n<div class=\"sectionbody\">\n<div class=\"ulist\">\n<ul>\n<li>\n<p><a href=\"http://maven.apache.org/plugins/maven-shade-plugin/examples/executable-jar.html\">Executable JAR</a></p>\n</li>\n<li>\n<p><a href=\"https://stackoverflow.com/questions/23420976/randomaccessfile-to-read-files-in-a-jar-file\">RandomAccessFile to read files in a Jar file</a></p>\n</li>\n</ul>\n</div>\n</div>\n</div>","document":{"title":"读取 Java Resource 中的文件"},"pageAttributes":{"slug":"java-resource","category":"java"},"revision":{"date":"2020-05-01","number":"1.0"}}},"pageContext":{"id":"aa00657c-2e1e-5ed9-91d6-5deba880ac91","pageAttributes__slug":"java-resource","__params":{"pageAttributes__slug":"java-resource"}}},"staticQueryHashes":["3143286284"],"slicesMap":{}}