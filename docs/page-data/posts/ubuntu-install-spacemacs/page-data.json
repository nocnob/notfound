{"componentChunkName":"component---src-pages-posts-asciidoc-page-attributes-slug-tsx","path":"/posts/ubuntu-install-spacemacs/","result":{"data":{"asciidoc":{"id":"c951a0e7-fbb3-5d86-8d40-55e8d95011c2","html":"<div class=\"sect1\">\n<h2 id=\"_安装_emacs_26\"><a class=\"anchor\" href=\"#_安装_emacs_26\"></a>安装 Emacs 26</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>Ubuntu 16.04 和 18.04 Emacs 版本都低于 26，可通过 ppa 安装最新的 Emacs 26.x：</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\">sudo add-apt-repository ppa:kelleyk/emacs\nsudo apt-get update\nsudo apt-get install emacs26</code></pre>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_安装_spacemacs\"><a class=\"anchor\" href=\"#_安装_spacemacs\"></a>安装 Spacemacs</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p><a href=\"https://github.com/syl20bnr/spacemacs\">spacemacs</a> master 更新太慢，使用 develop 分支。</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\">git clone -b develop https://github.com/syl20bnr/spacemacs ~/.emacs.d</code></pre>\n</div>\n</div>\n<div class=\"paragraph\">\n<p>启动 emacs，首次启动会有两个选项，直接回车选择默认值即可，之后会下载依赖，并自动生成配置文件 <code>~/.spacemacs</code> 。</p>\n</div>\n<div class=\"paragraph\">\n<p>创建目录 <code>.spacemacs.d</code> 用来存放自定义配置，可使用 git 等工具进行同步和版本控制。 <a href=\"https://github.com/syl20bnr/spacemacs/blob/develop/doc/QUICK%5FSTART.org#dotdirectory-spacemacsd\">文件加载顺序说明</a></p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\">mkdir ~/.spacemacs.d\nmv ~/.spacemacs ~/.spacemacs.d/init.el</code></pre>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_配置\"><a class=\"anchor\" href=\"#_配置\"></a>配置</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>可通过 <code>SPC f e d</code> 快速打开配置文件。</p>\n</div>\n<div class=\"sect2\">\n<h3 id=\"_图标\"><a class=\"anchor\" href=\"#_图标\"></a>图标</h3>\n<div class=\"paragraph\">\n<p>编辑 <code>/usr/share/applications/emacs26.desktop</code> <a href=\"https://askubuntu.com/questions/726351/use-desktop-icon-for-running-application\">参考</a> ：</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\">StartupWMClass=Emacs26\nIcon=/home/notfound/.emacs.d/core/banners/img/spacemacs.png</code></pre>\n</div>\n</div>\n</div>\n<div class=\"sect2\">\n<h3 id=\"_源\"><a class=\"anchor\" href=\"#_源\"></a>源</h3>\n<div class=\"paragraph\">\n<p>国外源下载速度慢，添加 <a href=\"https://mirrors.cloud.tencent.com/help/elpa.html\">国内的源</a> 。在 <code>dotspacemacs/user-init</code> 中添加：</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-lisp\" data-lang=\"lisp\">(setq configuration-layer-elpa-archives\n      '((\"melpa-cn\" . \"http://mirrors.cloud.tencent.com/elpa/melpa/\")\n        (\"org-cn\"   . \"http://mirrors.cloud.tencent.com/elpa/org/\")\n        (\"gnu-cn\"   . \"http://mirrors.cloud.tencent.com/elpa/gnu/\")))</code></pre>\n</div>\n</div>\n</div>\n<div class=\"sect2\">\n<h3 id=\"_复制粘贴\"><a class=\"anchor\" href=\"#_复制粘贴\"></a>复制粘贴</h3>\n<div class=\"paragraph\">\n<p>emacs 会拦截鼠标事件，点击鼠标右键没菜单， <code>Ctrl+c</code> 也无法使用。</p>\n</div>\n<div class=\"paragraph\">\n<p>layer <code>xclipboard</code> 可以通过 <code>SPC x p</code> 粘贴， <code>SPC x y</code> 复制。 <a href=\"https://github.com/syl20bnr/spacemacs/tree/develop/layers/+tools/xclipboard\">参考</a></p>\n</div>\n<div class=\"paragraph\">\n<p>在终端模式复制粘贴，在 <code>dotspacemacs/user-config</code> 中添加：</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-lisp\" data-lang=\"lisp\">(xterm-mouse-mode -1)</code></pre>\n</div>\n</div>\n<div class=\"paragraph\">\n<p>终端中，可通过 <code>Ctrl Shift c</code> 复制， <code>Ctrl Shift v</code> 粘贴，但在复制时行末尾的空白会变成多余的空格。 <a href=\"https://www.reddit.com/r/spacemacs/comments/7ax52t/how%5Fto%5Fcopypaste%5Ffrom%5Fthe%5Fhost%5Fclipboard%5Fin\">参考</a></p>\n</div>\n</div>\n<div class=\"sect2\">\n<h3 id=\"_搜索\"><a class=\"anchor\" href=\"#_搜索\"></a>搜索</h3>\n<div class=\"paragraph\">\n<p>传说 <code>ag</code> 比 <code>grep</code> 快，所以安装 <code>ag</code> 。</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\">sudo apt install silversearcher-ag</code></pre>\n</div>\n</div>\n<div class=\"paragraph\">\n<p>默认搜索工具使用顺序为 <code>rg</code> &gt; <code>ag</code> &gt; <code>pt</code> &gt; <code>ack</code> &gt; <code>grep</code> ，所以安装 <code>ag</code> 后就不会使用 <code>grep</code> 。</p>\n</div>\n<div class=\"sect3\">\n<h4 id=\"_文件过滤\"><a class=\"anchor\" href=\"#_文件过滤\"></a>文件过滤</h4>\n<div class=\"paragraph\">\n<p>搜索时可能需要过滤掉某些文件，默认情况下会使用 <code>.gitignore</code> 和 <code>.hgignore</code> 。</p>\n</div>\n<div class=\"paragraph\">\n<p>可在项目或者 home 目录下添加文件 <code>.agignore</code> （或 <code>.ignore</code> 2.0.0+ ）。 <a href=\"https://github.com/ggreer/the%5Fsilver%5Fsearcher/wiki/Advanced-Usage\">参考</a></p>\n</div>\n</div>\n<div class=\"sect3\">\n<h4 id=\"_按键\"><a class=\"anchor\" href=\"#_按键\"></a>按键</h4>\n<div class=\"ulist\">\n<ul>\n<li>\n<p><code>SPC *</code> 或 <code>SPC s P</code> 搜索当前光标位置的值</p>\n</li>\n<li>\n<p><code>SPC /</code> 或 <code>SPC s p</code> 搜索</p>\n</li>\n<li>\n<p><code>SPC s a p</code> 使用 <code>ag</code> 搜索当前项目下的文件</p>\n</li>\n<li>\n<p><code>SPC r s</code> 唤醒上次搜索 buffer</p>\n</li>\n</ul>\n</div>\n</div>\n</div>\n<div class=\"sect2\">\n<h3 id=\"_跳转\"><a class=\"anchor\" href=\"#_跳转\"></a>跳转</h3>\n<div class=\"paragraph\">\n<p>添加 <a href=\"https://github.com/syl20bnr/spacemacs/tree/develop/layers/%2Btags/gtags\">gtags</a> layer。</p>\n</div>\n<div class=\"sect3\">\n<h4 id=\"_安装\"><a class=\"anchor\" href=\"#_安装\"></a>安装</h4>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\">sudo apt install global\nsudo apt install exuberant-ctags python-pygments</code></pre>\n</div>\n</div>\n</div>\n<div class=\"sect3\">\n<h4 id=\"_配置_2\"><a class=\"anchor\" href=\"#_配置_2\"></a>配置</h4>\n<div class=\"paragraph\">\n<p>使用 ctags 生成标签，可添加环境变量：</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\">export GTAGSLABEL=ctags</code></pre>\n</div>\n</div>\n<div class=\"paragraph\">\n<p>如果需要自定义忽略的文件和目录，可通过 <code>~/.globalrc</code> 进行配置（文件内搜索 <code>skip</code> ）:</p>\n</div>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>Ubuntu 16.04: <code>vim /usr/share/doc/global/examples/gtags.conf.gz</code> 然后 <code>:w ~/.globalrc</code></p>\n</li>\n<li>\n<p>Ubuntu 18.04: <code>cp /usr/share/doc/global/examples/gtags.conf ~/.globalrc</code></p>\n</li>\n<li>\n<p><code>gtags.conf</code> 跨版本的配置可能不兼容，会出现错误</p>\n</li>\n</ul>\n</div>\n</div>\n<div class=\"sect3\">\n<h4 id=\"_按键_2\"><a class=\"anchor\" href=\"#_按键_2\"></a>按键</h4>\n<div class=\"ulist\">\n<ul>\n<li>\n<p><code>SPC p g</code> 或 <code>SPC m g C</code> 生成 tag</p>\n</li>\n<li>\n<p><code>SPC p g</code> 查找 tag</p>\n</li>\n</ul>\n</div>\n<div class=\"paragraph\">\n<p>tags 信息保存在 <code>GPATH</code> 、 <code>GRTAGS</code> 、 <code>GTAGS</code> 三个文件中，需要在版本控制中忽略这三个文件。</p>\n</div>\n</div>\n</div>\n<div class=\"sect2\">\n<h3 id=\"_其他常用_layers\"><a class=\"anchor\" href=\"#_其他常用_layers\"></a>其他常用 layers</h3>\n<div class=\"ulist\">\n<ul>\n<li>\n<p><a href=\"https://github.com/syl20bnr/spacemacs/tree/develop/layers/%2Bsource-control/git\">git</a> 使用了 <a href=\"https://magit.vc/\">magit</a></p>\n</li>\n<li>\n<p><a href=\"https://github.com/syl20bnr/spacemacs/tree/develop/layers/%2Bsource-control/version-control\">version-control</a> 可用来显示文件变更</p>\n</li>\n<li>\n<p><a href=\"https://github.com/syl20bnr/spacemacs/tree/develop/layers/%2Btools/restclient\">restclient</a> 可用来发送 http 请求</p>\n</li>\n<li>\n<p><a href=\"https://github.com/syl20bnr/spacemacs/tree/develop/layers/%2Bcompletion/auto-completion\">auto-completion</a> 自动补全</p>\n</li>\n<li>\n<p><a href=\"https://github.com/syl20bnr/spacemacs/tree/develop/layers/%2Bemacs/org\">org</a> org-mode 功能强大</p>\n</li>\n<li>\n<p><a href=\"https://github.com/syl20bnr/spacemacs/tree/develop/layers/%2Blang/asciidoc\">asciidoc</a></p>\n</li>\n<li>\n<p><a href=\"https://github.com/syl20bnr/spacemacs/tree/develop/layers/%2Blang/markdown\">markdown</a></p>\n</li>\n<li>\n<p><a href=\"https://github.com/syl20bnr/spacemacs/tree/develop/layers/%2Blang/yaml\">yaml</a></p>\n</li>\n<li>\n<p><a href=\"https://github.com/syl20bnr/spacemacs/tree/develop/layers/%2Blang/sql\">sql</a></p>\n</li>\n<li>\n<p><a href=\"https://github.com/syl20bnr/spacemacs/tree/develop/layers/%2Blang/html\">html</a></p>\n</li>\n<li>\n<p><a href=\"https://github.com/syl20bnr/spacemacs/tree/develop/layers/%2Blang/javascript\">javascript</a></p>\n</li>\n<li>\n<p><a href=\"https://github.com/syl20bnr/spacemacs/tree/develop/layers/%2Blang/json\">json</a></p>\n</li>\n<li>\n<p><a href=\"https://github.com/syl20bnr/spacemacs/tree/develop/layers/%2Blang/ruby\">ruby</a></p>\n</li>\n<li>\n<p><a href=\"https://github.com/syl20bnr/spacemacs/tree/develop/layers/%2Bframeworks/ruby-on-rails\">ruby-on-rails</a></p>\n</li>\n</ul>\n</div>\n</div>\n<div class=\"sect2\">\n<h3 id=\"_其他\"><a class=\"anchor\" href=\"#_其他\"></a>其他</h3>\n<div class=\"ulist\">\n<ul>\n<li>\n<p><a href=\"https://github.com/bbatsov/projectile\">projectile</a> 项目管理</p>\n</li>\n</ul>\n</div>\n</div>\n</div>\n</div>","document":{"title":"Ubuntu 安装配置 Spacemacs"},"pageAttributes":{"slug":"ubuntu-install-spacemacs","category":"emacs"},"revision":{"date":"2018-12-08","number":"1.0"}}},"pageContext":{"id":"c951a0e7-fbb3-5d86-8d40-55e8d95011c2","pageAttributes__slug":"ubuntu-install-spacemacs","__params":{"pageAttributes__slug":"ubuntu-install-spacemacs"}}},"staticQueryHashes":["3143286284"],"slicesMap":{}}