{"componentChunkName":"component---src-pages-posts-asciidoc-page-attributes-slug-tsx","path":"/posts/gradle-maven-mirror/","result":{"data":{"asciidoc":{"id":"8eefe496-84e9-5483-8d17-b15214750a8e","html":"<div id=\"preamble\">\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>配置 gradle 和 maven 源，环境为 Ubuntu 18.04。</p>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_配置_gradle_源\"><a class=\"anchor\" href=\"#_配置_gradle_源\"></a>配置 gradle 源</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>编辑文件 <code>~/.gradle/init.gradle</code> :</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-groovy\" data-lang=\"groovy\">allprojects {\n    def google_uri  = new URI('https://maven.aliyun.com/repository/google')\n    def central_uri = new URI('https://maven.aliyun.com/repository/central')\n    def jcenter_uri = new URI('https://maven.aliyun.com/repository/jcenter')\n\n    repositories {\n        all {\n            ArtifactRepository repo -&gt;\n            if (repo instanceof MavenArtifactRepository) {\n                def url = repo.url.toString()\n                if (url.startsWith('https://repo.maven.apache.org/maven2/') || url.startsWith('https://repo1.maven.org/maven2')) {\n                    project.logger.lifecycle \"Repository ${repo.url} replaced by ${central_uri}.\"\n                    repo.setUrl(central_uri)\n                } else if (url.startsWith('https://jcenter.bintray.com/')) {\n                    project.logger.lifecycle \"Repository ${repo.url} replaced by ${jcenter_uri}.\"\n                    repo.setUrl(jcenter_uri)\n                } else if (url.startsWith('https://dl.google.com/dl/android/maven2')) {\n                    project.logger.lifecycle \"Repository ${repo.url} replaced by ${google_uri}.\"\n                    repo.setUrl(google_uri)\n                }\n            }\n        }\n    }\n\n    buildscript {\n        repositories {\n            maven { url 'https://maven.aliyun.com/repository/public/' }\n            all { ArtifactRepository repo -&gt;\n                if (repo instanceof MavenArtifactRepository) {\n                    def url = repo.url.toString()\n                    if (url.startsWith('https://repo.maven.apache.org/maven2/') || url.startsWith('https://repo1.maven.org/maven2')) {\n                        project.logger.lifecycle \"Repository ${repo.url} replaced by ${central_uri}.\"\n                        repo.setUrl(central_uri)\n                    } else if (url.startsWith('https://jcenter.bintray.com/')) {\n                        project.logger.lifecycle \"Repository ${repo.url} replaced by ${jcenter_uri}.\"\n                        repo.setUrl(jcenter_uri)\n                    } else if (url.startsWith('https://dl.google.com/dl/android/maven2')) {\n                        project.logger.lifecycle \"Repository ${repo.url} replaced by ${google_uri}.\"\n                        repo.setUrl(google_uri)\n                    }\n                }\n            }\n        }\n    }\n}</code></pre>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_配置_maven_源\"><a class=\"anchor\" href=\"#_配置_maven_源\"></a>配置 maven 源</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>找到 Maven Home:</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\">mvn -v\nApache Maven 3.6.0\nMaven home: /usr/share/maven</code></pre>\n</div>\n</div>\n<div class=\"paragraph\">\n<p>复制配置:</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\">cp /usr/share/maven/conf/settings.xml ~/.m2/</code></pre>\n</div>\n</div>\n<div class=\"paragraph\">\n<p>编辑 <code>~/.m2/settings.xml</code> 找到 <code>mirrors</code> 节点，在节点中间添加:</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-xml\" data-lang=\"xml\">&lt;mirror&gt;\n  &lt;id&gt;central-aliyun&lt;/id&gt;\n  &lt;mirrorOf&gt;central&lt;/mirrorOf&gt;\n  &lt;name&gt;Central aliyun&lt;/name&gt;\n  &lt;url&gt;http://maven.aliyun.com/repository/central&lt;/url&gt;\n&lt;/mirror&gt;\n&lt;mirror&gt;\n  &lt;id&gt;jcenter-aliyun&lt;/id&gt;\n  &lt;mirrorOf&gt;jcenter&lt;/mirrorOf&gt;\n  &lt;name&gt;JCenter aliyun&lt;/name&gt;\n  &lt;url&gt;http://maven.aliyun.com/repository/jcenter&lt;/url&gt;\n&lt;/mirror&gt;\n&lt;mirror&gt;\n  &lt;id&gt;google-aliyun&lt;/id&gt;\n  &lt;mirrorOf&gt;google&lt;/mirrorOf&gt;\n  &lt;name&gt;Google aliyun&lt;/name&gt;\n  &lt;url&gt;http://maven.aliyun.com/repository/google&lt;/url&gt;\n&lt;/mirror&gt;</code></pre>\n</div>\n</div>\n</div>\n</div>","document":{"title":"配置 gradle 和 maven 源"},"pageAttributes":{"slug":"gradle-maven-mirror","category":"java"},"revision":{"date":"2019-05-03","number":"1.0"}}},"pageContext":{"id":"8eefe496-84e9-5483-8d17-b15214750a8e","pageAttributes__slug":"gradle-maven-mirror","__params":{"pageAttributes__slug":"gradle-maven-mirror"}}},"staticQueryHashes":["3143286284"],"slicesMap":{}}