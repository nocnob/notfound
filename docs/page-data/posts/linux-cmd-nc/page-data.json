{"componentChunkName":"component---src-pages-posts-asciidoc-page-attributes-slug-tsx","path":"/posts/linux-cmd-nc/","result":{"data":{"asciidoc":{"id":"4dcd4713-9dfc-5535-9f9c-c0bfea1af88b","html":"<div class=\"sect1\">\n<h2 id=\"_端口扫描\">端口扫描</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>扫描主机(192.168.1.60)的上的端口(20-1024)，仅输出成功的结果：</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\">nc -w 3 -z -v 192.168.1.60 20-1024 2&gt;&amp;1 | grep succeeded\n# 输出结果：\n# Connection to 192.168.1.60 22 port [tcp/ssh] succeeded!\n# Connection to 192.168.1.60 80 port [tcp/http] succeeded!</code></pre>\n</div>\n</div>\n<div class=\"ulist\">\n<ul>\n<li>\n<p><code>-w</code> 超时时间，单位秒</p>\n</li>\n<li>\n<p><code>-z</code> 仅扫描监听守护进程，不发送任何数据</p>\n</li>\n<li>\n<p><code>-v</code> 详细输出</p>\n</li>\n<li>\n<p><code>20-1024</code> 端口范围</p>\n</li>\n<li>\n<p><code>2&gt;&amp;1</code> 标准出错重定向到标准输出</p>\n</li>\n</ul>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_聊天\">聊天</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>服务端：</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\">nc -l 8081</code></pre>\n</div>\n</div>\n<div class=\"paragraph\">\n<p>客户端：</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\">nc 127.0.0.1 8081</code></pre>\n</div>\n</div>\n<div class=\"paragraph\">\n<p>服务端客户端直接可以相互发送请求。</p>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_数据传输\">数据传输</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>接收端，将接收的数据重定向到文件：</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\">nc -l 1234 &gt; filename.out</code></pre>\n</div>\n</div>\n<div class=\"ulist\">\n<ul>\n<li>\n<p><code>-l</code> 监听端口</p>\n</li>\n</ul>\n</div>\n<div class=\"paragraph\">\n<p>发送端，将文件重定向到 nc 并通过 nc 发送 ：</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\">nc -N 127.0.0.1 1234 &lt; filename.in</code></pre>\n</div>\n</div>\n<div class=\"ulist\">\n<ul>\n<li>\n<p><code>-N</code> 输入 <code>EOF</code> 后关闭 socket</p>\n</li>\n</ul>\n</div>\n<div class=\"paragraph\">\n<p>数据传输完成后，断开链接。</p>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_服务请求\">服务请求</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>向 HTTP 服务发送 GET 请求：</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\">printf \"GET / HTTP/1.0\\r\\n\\r\\n\" | nc 192.168.1.60 80</code></pre>\n</div>\n</div>\n<div class=\"paragraph\">\n<p>通过代理 127.0.0.1:1081 向 google.com 80 端口发送请求：</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\">nc -v -x 127.0.0.1:1081 -X connect google.com 80</code></pre>\n</div>\n</div>\n<div class=\"ulist\">\n<ul>\n<li>\n<p><code>-x</code> 代理地址和端口</p>\n</li>\n<li>\n<p><code>-X</code> 代理协议, connect 为 HTTP(S)</p>\n</li>\n</ul>\n</div>\n<div class=\"paragraph\">\n<p>SSH 代理，通过 SSH 方式访问 github.com 时，请求会经过代理 127.0.0.1:1081：</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"title\">~/.ssh/config</div>\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-conf\" data-lang=\"conf\">Host github.com\n    ProxyCommand /usr/bin/nc -X connect -x 127.0.0.1:1081 %h %p</code></pre>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_代理\">代理</h2>\n<div class=\"sectionbody\">\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\"># 服务端\nmkfifo 2way\nnc -l 8081 0&lt;2way | nc 127.0.0.1 22 1&gt;2way\n# 客户端\nssh -p 8081 notfound@127.0.0.1</code></pre>\n</div>\n</div>\n<div class=\"ulist\">\n<ul>\n<li>\n<p><code>|</code> 的管道数据从左边向右流动</p>\n</li>\n<li>\n<p><code>2way</code> 管道数据从右向左流动</p>\n</li>\n</ul>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_参考\">参考</h2>\n<div class=\"sectionbody\">\n<div class=\"ulist\">\n<ul>\n<li>\n<p>man nc</p>\n</li>\n<li>\n<p><a href=\"https://linux.cn/article-9190-1.html\" class=\"bare\">https://linux.cn/article-9190-1.html</a></p>\n</li>\n<li>\n<p><a href=\"https://www.kawabangga.com/posts/3723\" class=\"bare\">https://www.kawabangga.com/posts/3723</a></p>\n</li>\n</ul>\n</div>\n</div>\n</div>","document":{"title":"Linux 命令：nc"},"pageAttributes":{"slug":"linux-cmd-nc","category":"linux"},"revision":{"date":"2023-01-18","number":"1.0"}}},"pageContext":{"id":"4dcd4713-9dfc-5535-9f9c-c0bfea1af88b","pageAttributes__slug":"linux-cmd-nc","__params":{"pageAttributes__slug":"linux-cmd-nc"}}},"staticQueryHashes":["3143286284"],"slicesMap":{}}