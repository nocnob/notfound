{"componentChunkName":"component---src-pages-posts-asciidoc-page-attributes-slug-tsx","path":"/posts/java-artemis-start/","result":{"data":{"asciidoc":{"id":"fec70257-4361-55b9-88ff-d3d8eb36682b","html":"<div class=\"sect1\">\n<h2 id=\"_activemq_artemis_安装和使用\"><a class=\"anchor\" href=\"#_activemq_artemis_安装和使用\"></a>ActiveMQ Artemis 安装和使用</h2>\n<div class=\"sectionbody\">\n<div class=\"sect2\">\n<h3 id=\"_安装\"><a class=\"anchor\" href=\"#_安装\"></a>安装</h3>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-shell\" data-lang=\"shell\">wget https://mirrors.tuna.tsinghua.edu.cn/apache/activemq/activemq-artemis/2.17.0/apache-artemis-2.17.0-bin.tar.gz\ntar -zxvf apache-artemis-2.17.0-bin.tar.gz\nsudo mv apache-artemis-2.17.0 /opt/artemis\nsudo chown -R root:root /opt/artemis\nexport ARTEMIS_HOME=/opt/artemis</code></pre>\n</div>\n</div>\n</div>\n<div class=\"sect2\">\n<h3 id=\"_命令\"><a class=\"anchor\" href=\"#_命令\"></a>命令</h3>\n<div class=\"paragraph\">\n<p>启动、停止等命令：</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-shell\" data-lang=\"shell\"># 创建 broker 实例\n$ARTEMIS_HOME/bin/artemis create /srv/example\n# 启动服务\n/srv/example/bin/artemis run\n# 启动服务，后台运行\n/srv/example/bin/artemis-service start\n# 查看服务状态\n/srv/example/bin/artemis-service status\n# 停止服务\n/srv/example/bin/artemis-service stop</code></pre>\n</div>\n</div>\n<div class=\"paragraph\">\n<p>服务启动后，可进入页面管理 <a href=\"http://localhost:8161/console\" class=\"bare\">http://localhost:8161/console</a></p>\n</div>\n</div>\n<div class=\"sect2\">\n<h3 id=\"_基本使用\"><a class=\"anchor\" href=\"#_基本使用\"></a>基本使用</h3>\n<div class=\"paragraph\">\n<p>添加依赖</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-groovy\" data-lang=\"groovy\">implementation group: 'org.apache.activemq', name: 'artemis-jms-client-all', version: '2.17.0'</code></pre>\n</div>\n</div>\n<div class=\"sect3\">\n<h4 id=\"_生产者\"><a class=\"anchor\" href=\"#_生产者\"></a>生产者</h4>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-java\" data-lang=\"java\">Connection connection = null;\ntry {\n    ConnectionFactory cf = new ActiveMQConnectionFactory(\"tcp://localhost:61616\");\n    // 创建 JMS 连接\n    connection = cf.createConnection();\n    // 创建 JMS Session\n    Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);\n    Queue queue = session.createQueue(\"exampleQueue\");\n    // 创建 producer\n    MessageProducer producer = session.createProducer(queue);\n    // 创建 message\n    TextMessage message = session.createTextMessage(\"Hello ActiveMQ!\");\n    // 发送消息\n    producer.send(message);\n} finally {\n    if (connection != null) {\n        connection.close();\n    }\n}</code></pre>\n</div>\n</div>\n</div>\n<div class=\"sect3\">\n<h4 id=\"_消费者\"><a class=\"anchor\" href=\"#_消费者\"></a>消费者</h4>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-java\" data-lang=\"java\">Connection connection = null;\nConnectionFactory cf = new ActiveMQConnectionFactory(\"tcp://localhost:61616\");\ntry {\n    // 创建 JMS 连接\n    connection = cf.createConnection();\n    connection.start();\n    // 创建 JMS Session\n    Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);\n    Queue queue = session.createQueue(\"exampleQueue\");\n    // 创建 consumer\n    MessageConsumer consumer = session.createConsumer(queue);\n    // 接受 message\n    TextMessage message = (TextMessage) consumer.receive(5000);\n    System.out.println(message.getText());\n} finally {\n    if (connection != null) {\n        connection.close();\n    }\n}</code></pre>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect2\">\n<h3 id=\"_参考\"><a class=\"anchor\" href=\"#_参考\"></a>参考</h3>\n<div class=\"ulist\">\n<ul>\n<li>\n<p><a href=\"https://activemq.apache.org/components/artemis/documentation/latest/using-server.html\">Using the Server</a></p>\n</li>\n<li>\n<p><a href=\"https://github.com/apache/activemq-artemis/tree/2.17.0/examples/features/broker-connection/amqp-receiving-messages\">AMQP Broker Connection with Receivers</a></p>\n</li>\n<li>\n<p><a href=\"https://github.com/apache/activemq-artemis/tree/2.17.0/examples/features/standard/queue\">JMS Queue Example</a></p>\n</li>\n<li>\n<p><a href=\"https://developer.ibm.com/zh/depmodels/cloud/articles/cl-lo-activemq-artemis-and-qpid-to-apply-in-the-enterprise/\">深入了解 ActiveMQ Artemis 和 Qpid 以在企业中应用</a></p>\n</li>\n</ul>\n</div>\n</div>\n</div>\n</div>","document":{"title":"ActiveMQ Artemis 安装和使用"},"pageAttributes":{"slug":"java-artemis-start","category":"java"},"revision":{"date":"2021-03-03","number":"1.0"}}},"pageContext":{"id":"fec70257-4361-55b9-88ff-d3d8eb36682b","pageAttributes__slug":"java-artemis-start","__params":{"pageAttributes__slug":"java-artemis-start"}}},"staticQueryHashes":["3143286284"],"slicesMap":{}}