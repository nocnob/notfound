{"componentChunkName":"component---src-pages-posts-asciidoc-page-attributes-slug-tsx","path":"/posts/linux-cmd-sysbench-noatime/","result":{"data":{"asciidoc":{"id":"899c7838-7d29-51ea-a599-2cdfba7e6d7d","html":"<div id=\"preamble\">\n<div class=\"sectionbody\">\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\">sysbench fileio --threads=1 --file-num=16384 --file-total-size=1G --file-test-mode=rndrw prepare <i class=\"conum\" data-value=\"1\"></i><b>(1)</b>\nsysbench fileio --threads=1 --file-num=16384 --file-total-size=1G --file-test-mode=rndrw run     <i class=\"conum\" data-value=\"2\"></i><b>(2)</b>\nsysbench fileio --threads=1 --file-num=16384 --file-total-size=1G --file-test-mode=rndrw cleanup <i class=\"conum\" data-value=\"3\"></i><b>(3)</b></code></pre>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_test\">test</h2>\n<div class=\"sectionbody\">\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\">#!/bin/bash\n\nulimit -n 16400\n\nargs='--threads=1 --file-num=16384 --file-total-size=1G --file-test-mode=rndrw'\ndevise=/dev/sdb4\noptions=\"relatime noatime\"\noutput=/tmp/sysbench\n\nfor option in $options\ndo\n    if [ $option = \"noatime\" ]; then\n        sudo mount -o rw,noatime $devise /mnt/hdd\n        echo \"noatime\"\n    elif [ $option = \"relatime\" ]; then\n        sudo mount $devise /mnt/hdd\n        echo \"relatime\"\n    else\n        exit -1\n    fi\n\n    findmnt /mnt/hdd &gt; $output/$option.txt\n    cd /mnt/hdd/tmp/sysbench\n\n    iostat -dx 1 $devise &gt; $output/$option.prepare.iostat.txt &amp;\n    sysbench fileio $args prepare &gt; $output/$option.prepare.txt\n    kill %%\n\n    iostat -dx 1 $devise &gt; $output/$option.run.iostat.txt &amp;\n    sysbench fileio $args run  &gt; $output/$option.run.txt\n    kill %%\n\n    iostat -dx 1 $devise &gt; $output/$option.cleanup.iostat.txt &amp;\n    sysbench fileio $args cleanup &gt; $output/$option.cleanup.txt\n    kill %%\n\n    cd -\n    sudo umount /mnt/hdd\ndone</code></pre>\n</div>\n</div>\n</div>\n</div>","document":{"title":"linux-cmd-sysbench-noatime"},"pageAttributes":{"slug":"linux-cmd-sysbench-noatime","category":"linux"},"revision":{"date":"2022-07-15","number":"1.0"}}},"pageContext":{"id":"899c7838-7d29-51ea-a599-2cdfba7e6d7d","pageAttributes__slug":"linux-cmd-sysbench-noatime","__params":{"pageAttributes__slug":"linux-cmd-sysbench-noatime"}}},"staticQueryHashes":["3143286284"],"slicesMap":{}}