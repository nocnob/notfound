{"componentChunkName":"component---src-pages-posts-asciidoc-page-attributes-slug-tsx","path":"/posts/linux-gpg-usage/","result":{"data":{"asciidoc":{"id":"2e786700-51de-53e0-a7d3-0c5ef5a77faf","html":"<div id=\"preamble\">\n<div class=\"sectionbody\">\n<div class=\"ulist\">\n<ul>\n<li>\n<p>Ubuntu</p>\n</li>\n</ul>\n</div>\n<div class=\"paragraph\">\n<p>本文仅介绍 GPG 基本的使用。</p>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_安装_gpg_2_x\"><a class=\"anchor\" href=\"#_安装_gpg_2_x\"></a>安装 GPG 2.x</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>需要确保使用 GnuPG 2.x</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\">sudo apt install gnupg2 # Ubuntu 16.04\nsudo apt install gnupg  # Ubuntu 18.04</code></pre>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_生成密钥快速\"><a class=\"anchor\" href=\"#_生成密钥快速\"></a>生成密钥（快速）</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>一次生成多个密钥：</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\">gpg --full-generate-key</code></pre>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_生成密钥分步\"><a class=\"anchor\" href=\"#_生成密钥分步\"></a>生成密钥（分步）</h2>\n<div class=\"sectionbody\">\n<div class=\"sect2\">\n<h3 id=\"_1_生成主密钥\"><a class=\"anchor\" href=\"#_1_生成主密钥\"></a>1. 生成主密钥</h3>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\">gpg --quick-generate-key 'NotFound &lt;notfound@notfound.cn&gt;' rsa4096 cert</code></pre>\n</div>\n</div>\n<div class=\"paragraph\">\n<p>输出：</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-text\" data-lang=\"text\">pub   rsa4096 2019-02-16 [C] [有效至：2021-02-15]\n      E609071A680F01521759F2AD6845FD9F1A3352AF\nuid                      NotFound &lt;notfound@notfound.cn&gt;</code></pre>\n</div>\n</div>\n<div class=\"ulist\">\n<ul>\n<li>\n<p><code>E609071A680F01521759F2AD6845FD9F1A3352AF</code> 为密钥 ID，分为三种形态：</p>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>指纹：完整的 40 个字符的密钥标识符</p>\n</li>\n<li>\n<p>长密钥 ID：指纹的最后 16 个字符</p>\n</li>\n<li>\n<p>短密钥 ID：指纹的最后 8 个字符</p>\n</li>\n</ul>\n</div>\n</li>\n<li>\n<p>uid 为身份，可以拥有多个身份，其中第一个为主 UID</p>\n</li>\n</ul>\n</div>\n</div>\n<div class=\"sect2\">\n<h3 id=\"_2_生成子密钥\"><a class=\"anchor\" href=\"#_2_生成子密钥\"></a>2. 生成子密钥</h3>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\">gpg --quick-add-key E609071A680F01521759F2AD6845FD9F1A3352AF rsa2048 encr # [E]加密子密钥\ngpg --quick-add-key E609071A680F01521759F2AD6845FD9F1A3352AF rsa2048 sign # [S]签名子密钥\ngpg --quick-add-key E609071A680F01521759F2AD6845FD9F1A3352AF rsa2048 auth # [A]验证子密钥</code></pre>\n</div>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_查看\"><a class=\"anchor\" href=\"#_查看\"></a>查看</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>查看 GPG Key 信息：</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\">gpg --list-key E609071A680F01521759F2AD6845FD9F1A3352AF\ngpg --with-keygrip --list-key E609071A680F01521759F2AD6845FD9F1A3352AF\ngpg --with-subkey-fingerprint --list-key E609071A680F01521759F2AD6845FD9F1A3352AF</code></pre>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_uid身份\"><a class=\"anchor\" href=\"#_uid身份\"></a>UID(身份)</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>一个 GPG KEY 可以拥有多个UID。 添加 UID：</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\">gpg --quick-add-uid E609071A680F01521759F2AD6845FD9F1A3352AF 'Found &lt;found@notfound.cn&gt;'</code></pre>\n</div>\n</div>\n<div class=\"paragraph\">\n<p>选择主 UID：</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\">gpg --quick-set-primary-uid E609071A680F01521759F2AD6845FD9F1A3352AF \"Found &lt;found@notfound.cn&gt;\"</code></pre>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_导入与导出\"><a class=\"anchor\" href=\"#_导入与导出\"></a>导入与导出</h2>\n<div class=\"sectionbody\">\n<div class=\"sect2\">\n<h3 id=\"_导出\"><a class=\"anchor\" href=\"#_导出\"></a>导出</h3>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\"># 导出公钥\ngpg --export --armor --output public.gpg E609071A680F01521759F2AD6845FD9F1A3352AF\n# 导出私钥\ngpg --export-secret-key --armor --output private.gpg E609071A680F01521759F2AD6845FD9F1A3352AF</code></pre>\n</div>\n</div>\n<div class=\"paragraph\">\n<p>可以将导出的公钥添加到 GitHub等</p>\n</div>\n</div>\n<div class=\"sect2\">\n<h3 id=\"_导入\"><a class=\"anchor\" href=\"#_导入\"></a>导入</h3>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\"># 导入公钥\ngpg --import public.gpg\n# 导入私钥\ngpg --import --import-options restore private.gpg</code></pre>\n</div>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_不导入查看公钥\"><a class=\"anchor\" href=\"#_不导入查看公钥\"></a>不导入查看公钥</h2>\n<div class=\"sectionbody\">\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\">gpg --import-options show-only --import public.gpg</code></pre>\n</div>\n</div>\n<div class=\"sect2\">\n<h3 id=\"_信任\"><a class=\"anchor\" href=\"#_信任\"></a>信任</h3>\n<div class=\"paragraph\">\n<p>GitHub GPG 公钥：</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\">wget https://github.com/web-flow.gpg\ngpg --import web-flow.gpg</code></pre>\n</div>\n</div>\n<div class=\"paragraph\">\n<p>导入的公钥进行验证时可能显示如下信息：</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-text\" data-lang=\"text\">gpg: WARNING: This key is not certified with a trusted signature!\ngpg:          There is no indication that the signature belongs to the owner.</code></pre>\n</div>\n</div>\n<div class=\"paragraph\">\n<p>调整信任级别：</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\">gpg --edit-key 5DE3E0509C47EA3CF04A42D34AEE18F83AFDEB23\n&gt; trust\n&gt; quit</code></pre>\n</div>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_删除\"><a class=\"anchor\" href=\"#_删除\"></a>删除</h2>\n<div class=\"sectionbody\">\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\"># 删除私钥\ngpg --delete-secret-key E609071A680F01521759F2AD6845FD9F1A3352AF\n# 删除公钥\ngpg --delete-key E609071A680F01521759F2AD6845FD9F1A3352AF</code></pre>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_参考\"><a class=\"anchor\" href=\"#_参考\"></a>参考</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p><a href=\"https://linux.cn/\">Linux 中国</a>上有关于 PGP(GPG) 详细介绍，强烈推荐：</p>\n</div>\n<div class=\"ulist\">\n<ul>\n<li>\n<p><a href=\"https://linux.cn/article-9524-1-rel.html\">用 PGP 保护代码完整性（一）：基本概念和工具</a></p>\n</li>\n<li>\n<p><a href=\"https://linux.cn/article-9529-1-rel.html\">用 PGP 保护代码完整性（二）：生成你的主密钥</a></p>\n</li>\n<li>\n<p><a href=\"https://linux.cn/article-9607-1.html\">用 PGP 保护代码完整性（三）：生成 PGP 子密钥</a></p>\n</li>\n<li>\n<p><a href=\"https://linux.cn/article-10402-1.html\">用 PGP 保护代码完整性（四）：将主密钥移到离线存储中</a></p>\n</li>\n<li>\n<p><a href=\"https://linux.cn/article-10415-1.html\">用 PGP 保护代码完整性（五）：将子密钥移到一个硬件设备中</a></p>\n</li>\n<li>\n<p><a href=\"https://linux.cn/article-10421-1.html\">用 PGP 保护代码完整性（六）：在 Git 上使用 PGP</a></p>\n</li>\n<li>\n<p><a href=\"https://linux.cn/article-10432-1.html\">用 PGP 保护代码完整性（七）：保护在线帐户</a></p>\n</li>\n</ul>\n</div>\n</div>\n</div>","document":{"title":"GPG 使用"},"pageAttributes":{"slug":"linux-gpg-usage","category":"gpg"},"revision":{"date":"2019-02-16","number":"1.0"}}},"pageContext":{"id":"2e786700-51de-53e0-a7d3-0c5ef5a77faf","pageAttributes__slug":"linux-gpg-usage","__params":{"pageAttributes__slug":"linux-gpg-usage"}}},"staticQueryHashes":["3143286284"],"slicesMap":{}}