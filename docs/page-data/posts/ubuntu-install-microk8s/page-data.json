{"componentChunkName":"component---src-pages-posts-asciidoc-page-attributes-slug-tsx","path":"/posts/ubuntu-install-microk8s/","result":{"data":{"asciidoc":{"id":"73bec23f-f32e-5d27-acf5-ba67f505d04a","html":"<div id=\"preamble\">\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>系统环境：Ubuntu 18.04</p>\n</div>\n<div class=\"paragraph\">\n<p>为方便本地开发 Kubernete，Ubuntu 提供了 <a href=\"https://microk8s.io/\">microk8s</a>。</p>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_安装\"><a class=\"anchor\" href=\"#_安装\"></a>安装</h2>\n<div class=\"sectionbody\">\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\">sudo snap install microk8s --classic</code></pre>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_查看_microk8s_服务状态\"><a class=\"anchor\" href=\"#_查看_microk8s_服务状态\"></a>查看 microk8s 服务状态</h2>\n<div class=\"sectionbody\">\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\">systemctl status snap.microk8s.daemon-docker.service</code></pre>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_设置_http_代理\"><a class=\"anchor\" href=\"#_设置_http_代理\"></a>设置 http 代理</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>由于众所周知的原因，Kubernetes 无法拉去镜像，可通过设置 http 代理来解决。</p>\n</div>\n<div class=\"paragraph\">\n<p>在 Linux 中可通过环境变量 <code>http_proxy</code> 或 <code>https_proxy</code> 设置 http(s) 代理。microk8s 是通过 systemd 管理的，因此可在 systemd 配置文件传入环境变量。</p>\n</div>\n<div class=\"paragraph\">\n<p>http 转发服务可使用 <code>privoxy</code> 。</p>\n</div>\n<div class=\"paragraph\">\n<p>编辑 <code>/etc/systemd/system/snap.microk8s.daemon-docker.service</code> ，添加环境变量：</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-conf\" data-lang=\"conf\">[Service]\nEnvironment=http_proxy=\"http://127.0.0.1:8118\"\nEnvironment=https_proxy=\"http://127.0.0.1:8118\"</code></pre>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_重启服务\"><a class=\"anchor\" href=\"#_重启服务\"></a>重启服务</h2>\n<div class=\"sectionbody\">\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\">sudo systemctl daemon-reload\nsudo systemctl restart snap.microk8s.daemon-docker.service</code></pre>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_参考\"><a class=\"anchor\" href=\"#_参考\"></a>参考</h2>\n<div class=\"sectionbody\">\n<div class=\"ulist\">\n<ul>\n<li>\n<p>microk8s <a href=\"https://microk8s.io/\" class=\"bare\">https://microk8s.io/</a></p>\n</li>\n<li>\n<p>命令行配置代理服务器 <a href=\"https://yevon-cn.github.io/2017/05/05/set-proxy-of-cmd.html\" class=\"bare\">https://yevon-cn.github.io/2017/05/05/set-proxy-of-cmd.html</a></p>\n</li>\n</ul>\n</div>\n</div>\n</div>","document":{"title":"Ubuntu 安装配置 microk8s"},"pageAttributes":{"slug":"ubuntu-install-microk8s","category":"tool"},"revision":{"date":"2018-11-10","number":"1.0"}}},"pageContext":{"id":"73bec23f-f32e-5d27-acf5-ba67f505d04a","pageAttributes__slug":"ubuntu-install-microk8s","__params":{"pageAttributes__slug":"ubuntu-install-microk8s"}}},"staticQueryHashes":["3143286284"],"slicesMap":{}}