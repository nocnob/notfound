{"componentChunkName":"component---src-pages-posts-asciidoc-page-attributes-slug-tsx","path":"/posts/linux-deb-package-start/","result":{"data":{"asciidoc":{"id":"2249874f-e901-5545-9a51-a5223176e5f7","html":"<div id=\"preamble\">\n<div class=\"sectionbody\">\n<div class=\"ulist\">\n<ul>\n<li>\n<p>系统环境：Ubuntu 22.04</p>\n</li>\n</ul>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_目录结构\"><a class=\"anchor\" href=\"#_目录结构\"></a>目录结构</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>最终目录结构如下：</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-text\" data-lang=\"text\">helloworld_1.0-1_amd64\n├── DEBIAN\n│   └── control\n└── usr\n    └── local\n        └── bin\n            └── helloworld</code></pre>\n</div>\n</div>\n<div class=\"ulist\">\n<ul>\n<li>\n<p><code>control</code> deb 包配置文件</p>\n</li>\n<li>\n<p><code>helloworld</code> 可执行程序</p>\n</li>\n</ul>\n</div>\n<div class=\"paragraph\">\n<p>创建目录：</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\">mkdir helloworld_1.0-1_amd64/DEBIAN\nmkdir helloworld_1.0-1_amd64/usr/local/bin -p</code></pre>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_程序\"><a class=\"anchor\" href=\"#_程序\"></a>程序</h2>\n<div class=\"sectionbody\">\n<div class=\"listingblock\">\n<div class=\"title\">main.go</div>\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-go\" data-lang=\"go\">package main\n\nimport \"fmt\"\n\nfunc main() {\n\tfmt.Println(\"Hello World!\")\n}</code></pre>\n</div>\n</div>\n<div class=\"paragraph\">\n<p>编译：</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\">go build -o helloworld main.go</code></pre>\n</div>\n</div>\n<div class=\"paragraph\">\n<p>将二进制文件放到 <code>helloworld_1.0-1_amd64/usr/local/bin/helloworld</code></p>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_打包\"><a class=\"anchor\" href=\"#_打包\"></a>打包</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>新建 deb 配置文件 <code>helloworld_1.0-1_amd64/DEBIAN/control</code>：</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"title\">helloworld_1.0-1_amd64/DEBIAN/control</div>\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-debian\" data-lang=\"debian\">Package: helloworld\nVersion: 1.0\nArchitecture: amd64\nMaintainer: notfound &lt;helloworld@notfound.cn&gt;\nDescription: A program that greets you.\n You can add a longer description here. Mind the space at the beginning of this paragraph.</code></pre>\n</div>\n</div>\n<div class=\"paragraph\">\n<p>指定打包命令：</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\">dpkg-deb --build --root-owner-group helloworld_1.0-1_amd64</code></pre>\n</div>\n</div>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>程序的用户和组都为 root</p>\n</li>\n</ul>\n</div>\n<div class=\"paragraph\">\n<p>安装、执行、卸载：</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\">sudo dpkg -i helloworld_1.0-1_amd64.deb # 安装\n/usr/local/bin/helloworld               # 执行\ndpkg -L helloworld                      # 查看包中会被安装的文件\nsudo apt purge helloworld               # 卸载</code></pre>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_参考\"><a class=\"anchor\" href=\"#_参考\"></a>参考</h2>\n<div class=\"sectionbody\">\n<div class=\"ulist\">\n<ul>\n<li>\n<p><a href=\"https://www.internalpointers.com/post/build-binary-deb-package-practical-guide\" class=\"bare\">https://www.internalpointers.com/post/build-binary-deb-package-practical-guide</a></p>\n</li>\n<li>\n<p><a href=\"https://www.debian.org/doc/manuals/debmake-doc/index.zh-cn.html\" class=\"bare\">https://www.debian.org/doc/manuals/debmake-doc/index.zh-cn.html</a></p>\n</li>\n</ul>\n</div>\n</div>\n</div>","document":{"title":"构建一个简单的 deb 包"},"pageAttributes":{"slug":"linux-deb-package-start","category":"linux"},"revision":{"date":"2022-08-14","number":"1.0"}}},"pageContext":{"id":"2249874f-e901-5545-9a51-a5223176e5f7","pageAttributes__slug":"linux-deb-package-start","__params":{"pageAttributes__slug":"linux-deb-package-start"}}},"staticQueryHashes":["3143286284"],"slicesMap":{}}