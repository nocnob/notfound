{"componentChunkName":"component---src-pages-posts-asciidoc-page-attributes-slug-tsx","path":"/posts/process-strace/","result":{"data":{"asciidoc":{"id":"174a393b-c1d0-5498-a704-50303975922f","html":"<div id=\"preamble\">\n<div class=\"sectionbody\">\n<div class=\"ulist\">\n<ul>\n<li>\n<p>Ubuntu 18.04</p>\n</li>\n<li>\n<p>通过 strace 查看 Unicorn 中开启的监控线程是否运行正常</p>\n</li>\n</ul>\n</div>\n<div class=\"paragraph\">\n<p>==</p>\n</div>\n<div class=\"olist arabic\">\n<ol class=\"arabic\">\n<li>\n<p>查看进程 ID</p>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-text\" data-lang=\"text\">$ ps -ef | grep unicorn\nnotfound    20178  6419  2 11:22 ?        00:00:17 unicorn master -E production -c config/unicorn.rb -D\nnotfound    20192 20178  0 11:22 ?        00:00:00 unicorn worker[0] -E production -c config/unicorn.rb -D\nnotfound    20195 20178  0 11:22 ?        00:00:00 unicorn worker[1] -E production -c config/unicorn.rb -D\nnotfound    20198 20178  0 11:22 ?        00:00:00 unicorn worker[2] -E production -c config/unicorn.rb -D</code></pre>\n</div>\n</div>\n</li>\n<li>\n<p>查看进程和线程</p>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-text\" data-lang=\"text\">$ pstree -pt 20178\nbundle(20178)─┬─bundle(20192)─┬─{ruby-timer-thr}(20194)\n              │               └─{ruby_sampler}(20201)\n              ├─bundle(20195)─┬─{ruby-timer-thr}(20197)\n              │               └─{ruby_sampler}(20202)\n              ├─bundle(20198)─┬─{ruby-timer-thr}(20200)\n              │               └─{ruby_sampler}(20203)\n              ├─{ruby-timer-thr}(20199)\n              ├─{server.rb:293}(20212)\n              ├─{unicorn_sampler}(20190)\n              ├─{utils.rb:156}(20213)\n              └─{web_exporter}(20191)</code></pre>\n</div>\n</div>\n</li>\n<li>\n<p>查看线程执行内容</p>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-text\" data-lang=\"text\">$ strace -p 20201</code></pre>\n</div>\n</div>\n</li>\n</ol>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_参考\"><a class=\"anchor\" href=\"#_参考\"></a>参考</h2>\n<div class=\"sectionbody\">\n<div class=\"ulist\">\n<ul>\n<li>\n<p><code>man strace</code></p>\n</li>\n<li>\n<p><code>man pstree</code></p>\n</li>\n</ul>\n</div>\n</div>\n</div>","document":{"title":"使用 strace 查看 Ruby 线程系统调用"},"pageAttributes":{"slug":"process-strace","category":"linux"},"revision":{"date":"2020-05-29","number":"1.0"}}},"pageContext":{"id":"174a393b-c1d0-5498-a704-50303975922f","pageAttributes__slug":"process-strace","__params":{"pageAttributes__slug":"process-strace"}}},"staticQueryHashes":["3143286284"],"slicesMap":{}}