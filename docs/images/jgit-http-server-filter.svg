<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="440px" preserveAspectRatio="none" style="width:907px;height:440px;" version="1.1" viewBox="0 0 907 440" width="907px" zoomAndPan="magnify"><defs><filter height="300%" id="fz5w59zuvi47p" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="46" x2="46" y1="43.0679" y2="394.716"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="154" x2="154" y1="43.0679" y2="394.716"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="281" x2="281" y1="43.0679" y2="394.716"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="450" x2="450" y1="43.0679" y2="394.716"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="625" x2="625" y1="43.0679" y2="394.716"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="794" x2="794" y1="43.0679" y2="394.716"/><rect fill="#FEFECE" filter="url(#fz5w59zuvi47p)" height="33.0679" style="stroke:#A80036;stroke-width:1.5;" width="79" x="5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65" x="12" y="26.9659">GitServlet</text><rect fill="#FEFECE" filter="url(#fz5w59zuvi47p)" height="33.0679" style="stroke:#A80036;stroke-width:1.5;" width="79" x="5" y="393.716"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65" x="12" y="415.682">GitServlet</text><rect fill="#FEFECE" filter="url(#fz5w59zuvi47p)" height="33.0679" style="stroke:#A80036;stroke-width:1.5;" width="108" x="98" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94" x="105" y="26.9659">NoCacheFilter</text><rect fill="#FEFECE" filter="url(#fz5w59zuvi47p)" height="33.0679" style="stroke:#A80036;stroke-width:1.5;" width="108" x="98" y="393.716"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94" x="105" y="415.682">NoCacheFilter</text><rect fill="#FEFECE" filter="url(#fz5w59zuvi47p)" height="33.0679" style="stroke:#A80036;stroke-width:1.5;" width="119" x="220" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="227" y="26.9659">RepositoryFilter</text><rect fill="#FEFECE" filter="url(#fz5w59zuvi47p)" height="33.0679" style="stroke:#A80036;stroke-width:1.5;" width="119" x="220" y="393.716"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="227" y="415.682">RepositoryFilter</text><rect fill="#FEFECE" filter="url(#fz5w59zuvi47p)" height="33.0679" style="stroke:#A80036;stroke-width:1.5;" width="190" x="353" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="176" x="360" y="26.9659">UploadPackServlet.Factory</text><rect fill="#FEFECE" filter="url(#fz5w59zuvi47p)" height="33.0679" style="stroke:#A80036;stroke-width:1.5;" width="190" x="353" y="393.716"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="176" x="360" y="415.682">UploadPackServlet.Factory</text><rect fill="#FEFECE" filter="url(#fz5w59zuvi47p)" height="33.0679" style="stroke:#A80036;stroke-width:1.5;" width="132" x="557" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118" x="564" y="26.9659">uploadPackFilters</text><rect fill="#FEFECE" filter="url(#fz5w59zuvi47p)" height="33.0679" style="stroke:#A80036;stroke-width:1.5;" width="132" x="557" y="393.716"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118" x="564" y="415.682">uploadPackFilters</text><rect fill="#FEFECE" filter="url(#fz5w59zuvi47p)" height="33.0679" style="stroke:#A80036;stroke-width:1.5;" width="179" x="703" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="165" x="710" y="26.9659">uploadPackErrorHandler</text><rect fill="#FEFECE" filter="url(#fz5w59zuvi47p)" height="33.0679" style="stroke:#A80036;stroke-width:1.5;" width="179" x="703" y="393.716"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="165" x="710" y="415.682">uploadPackErrorHandler</text><polygon fill="#A80036" points="142,86.6269,152,90.6269,142,94.6269,146,90.6269" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="46.5" x2="148" y1="90.6269" y2="90.6269"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="53.5" y="84.8179">doFilter</text><path d="M159,58.0679 L159,103.0679 L267,103.0679 L267,68.0679 L257,58.0679 L159,58.0679 " fill="#FBFB77" filter="url(#fz5w59zuvi47p)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M257,58.0679 L257,68.0679 L267,68.0679 L257,58.0679 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="87" x="165" y="76.9649">通过设置 HTTP</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="165" y="94.6709">头部禁用缓存</text><polygon fill="#A80036" points="269.5,146.039,279.5,150.039,269.5,154.039,273.5,150.039" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="154" x2="275.5" y1="150.039" y2="150.039"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="161" y="144.23">doFilter</text><path d="M286,117.4799 L286,162.4799 L424,162.4799 L424,127.4799 L414,117.4799 L286,117.4799 " fill="#FBFB77" filter="url(#fz5w59zuvi47p)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M414,117.4799 L414,127.4799 L424,127.4799 L414,117.4799 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="292" y="136.377">访问权限判断</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="292" y="154.083">无法直接区分读、写</text><polygon fill="#A80036" points="438,196.598,448,200.598,438,204.598,442,200.598" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="281.5" x2="444" y1="200.598" y2="200.598"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="288.5" y="194.789">doFilter</text><path d="M455,176.892 L455,203.892 L567,203.892 L567,186.892 L557,176.892 L455,176.892 " fill="#FBFB77" filter="url(#fz5w59zuvi47p)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M557,176.892 L557,186.892 L567,186.892 L557,176.892 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="461" y="195.789">可确定为读操作</text><polygon fill="#A80036" points="613,238.304,623,242.304,613,246.304,617,242.304" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="450" x2="619" y1="242.304" y2="242.304"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="457" y="236.495">doFilter</text><path d="M630,218.598 L630,245.598 L749,245.598 L749,228.598 L739,218.598 L630,218.598 " fill="#FBFB77" filter="url(#fz5w59zuvi47p)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M739,218.598 L739,228.598 L749,228.598 L739,218.598 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98" x="636" y="237.495">用户自定义 Filter</text><polygon fill="#A80036" points="782.5,288.863,792.5,292.863,782.5,296.863,786.5,292.863" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="625" x2="788.5" y1="292.863" y2="292.863"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="632" y="287.054">doFilter</text><path d="M799,260.304 L799,305.304 L898,305.304 L898,270.304 L888,260.304 L799,260.304 " fill="#FBFB77" filter="url(#fz5w59zuvi47p)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M888,260.304 L888,270.304 L898,270.304 L888,260.304 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="805" y="279.201">执行 upload</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="805" y="296.907">以及异常处理</text><polygon fill="#A80036" points="636,316.716,626,320.716,636,324.716,632,320.716" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="630" x2="793.5" y1="320.716" y2="320.716"/><polygon fill="#A80036" points="461,330.716,451,334.716,461,338.716,457,334.716" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="455" x2="624" y1="334.716" y2="334.716"/><polygon fill="#A80036" points="292.5,344.716,282.5,348.716,292.5,352.716,288.5,348.716" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="286.5" x2="449" y1="348.716" y2="348.716"/><polygon fill="#A80036" points="165,358.716,155,362.716,165,366.716,161,362.716" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="159" x2="280.5" y1="362.716" y2="362.716"/><polygon fill="#A80036" points="57.5,372.716,47.5,376.716,57.5,380.716,53.5,376.716" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="51.5" x2="153" y1="376.716" y2="376.716"/><!--MD5=[74230a7e5b64b1d9ba2302987371fd0a]
@startuml
GitServlet - -> NoCacheFilter : doFilter
note right: 通过设置 HTTP\n头部禁用缓存
NoCacheFilter - -> RepositoryFilter : doFilter
note right: 访问权限判断\n无法直接区分读、写
RepositoryFilter - -> UploadPackServlet.Factory : doFilter
note right: 可确定为读操作
UploadPackServlet.Factory - -> uploadPackFilters : doFilter
note right: 用户自定义 Filter
uploadPackFilters - -> uploadPackErrorHandler : doFilter
note right: 执行 upload\n以及异常处理
uploadPackFilters <- - uploadPackErrorHandler
UploadPackServlet.Factory <- - uploadPackFilters
RepositoryFilter <- - UploadPackServlet.Factory
NoCacheFilter <- - RepositoryFilter
GitServlet <- - NoCacheFilter
@enduml

PlantUML version 1.2021.01(Tue Feb 02 15:55:08 CST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: zh
Country: CN
--></g></svg>